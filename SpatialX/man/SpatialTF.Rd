% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spatialtf.R
\name{SpatialTF.Assay}
\alias{SpatialTF.Assay}
\alias{SpatialTF.SpatialX}
\alias{SpatialTF}
\title{Spatial Transcriptomics Data Transformation}
\usage{
\method{SpatialTF}{Assay}(
  object,
  features = NULL,
  tf.method = c("log", "logsf", "vst", "standard"),
  slot.use = "counts",
  do.scale = TRUE,
  do.center = TRUE,
  scale.factor = 10000,
  pseudo.count = 1,
  margin = 1,
  scale.max = 10,
  block.size = 1000,
  min.cells.to.block = 3000,
  verbose = TRUE,
  ...
)

\method{SpatialTF}{SpatialX}(
  object,
  assay = NULL,
  features = NULL,
  tf.method = "log",
  slot.use = "counts",
  do.scale = TRUE,
  do.center = TRUE,
  scale.factor = 10000,
  pseudo.count = 1,
  margin = 1,
  scale.max = 10,
  block.size = 1000,
  min.cells.to.block = 3000,
  verbose = TRUE,
  ...
)

SpatialTF(object, ...)
}
\arguments{
\item{object}{An object of class \code{Assay} or \code{SpatialX} containing
spatial transcriptomics data.}

\item{features}{Vector of feature names to transform. Default is all features
in the object.}

\item{tf.method}{Transformation method to apply. Available options:
\itemize{
  \item{"log"}{ - Log normalization with library size factors}
  \item{"logsf"}{ - Log normalization with size factors and pseudo count}
  \item{"vst"}{ - Variance Stabilizing Transformation using sctransform}
  \item{"standard"}{ - Standard scaling (Z-score normalization)}
}}

\item{slot.use}{Name of the assay slot to use as input (default: "counts").}

\item{do.scale}{Whether to scale the data when using "standard" method (default: TRUE).}

\item{do.center}{Whether to center the data when using "standard" method (default: TRUE).}

\item{scale.factor}{Scale factor for normalization methods (default: 1e4).}

\item{pseudo.count}{Pseudo count to add before log transformation for "logsf"
method (default: 1).}

\item{margin}{Margin for normalization (1 for features, 2 for cells) (default: 1).}

\item{scale.max}{Maximum absolute value for scaled data (default: 10).}

\item{block.size}{Number of features to process in a single computation block
(default: 1000).}

\item{min.cells.to.block}{Minimum number of cells to use blocking (default: 3000).}

\item{verbose}{Whether to display progress information (default: TRUE).}

\item{...}{Additional arguments passed to transformation methods.}

\item{assay}{Name of assay to use for SpatialX objects.}
}
\value{
For \code{Assay} objects: Returns a modified Assay object with transformed
data stored in the appropriate slot. For \code{SpatialX} objects: Returns a
modified SpatialX object with the specified assay transformed.
}
\description{
This function performs various transformations on spatial transcriptomics data
including normalization, variance stabilization, and scaling. It supports multiple
transformation methods and can handle both Assay and SpatialX objects.
}
\details{
This function provides a unified interface for multiple data transformation
techniques commonly used in spatial transcriptomics analysis:

\itemize{
  \item{\strong{log}:} Performs log normalization with library size factors.
  Transformed data is stored in the 'data' slot.
  \item{\strong{logsf}:} Performs log normalization with size factors and
  pseudo count for stabilization. Transformed data is stored in the 'data' slot.
  \item{\strong{vst}:} Applies Variance Stabilizing Transformation using the
  \code{sctransform} package. This method models the technical noise and
  returns residuals that are approximately normally distributed. Transformed
  data is stored in the 'scale.data' slot.
  \item{\strong{standard}:} Applies standard scaling (centering and scaling
  to Z-scores). Transformed data is stored in the 'data' slot.
}
}
\section{Slot Usage}{

Different transformation methods store results in different slots:
\itemize{
  \item{log, logsf, standard:} Store results in the 'data' slot
  \item{vst:} Stores results in the 'scale.data' slot
}
}

\section{Method-Specific Details}{

\describe{
  \item{VST Transformation}{When using the 'vst' method, the function calls
  \code{sctransform::vst} with latent variables including "log_umi". This
  method is particularly effective for removing technical variability while
  preserving biological signal.}
  \item{Log Transformations}{Both 'log' and 'logsf' methods use the
  \code{NormalizedSpData} function internally, with different normalization
  strategies.}
  \item{Standard Scaling}{Uses the \code{ScaledSpData} function with the
  "standard" method for Z-score normalization.}
}
}

\examples{
\dontrun{
# Example with SpatialX object
data("pbmc_small")

# Apply log transformation
object <- SpatialTF(object = object, tf.method = "log")

# Apply variance stabilizing transformation
object <- SpatialTF(object = object, tf.method = "vst")

# Apply standard scaling to specific features
variable_features <- c("Gene1", "Gene2", "Gene3")
object <- SpatialTF(object = object, 
                   tf.method = "standard",
                   features = variable_features)

# Apply log transformation with custom scale factor
object <- SpatialTF(object = object,
                   tf.method = "log",
                   scale.factor = 10000)
}

}
\concept{preprocessing}
\concept{transformation}
